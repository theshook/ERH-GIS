<template name="Maps">
  <style>
    .map-container {
      width: 100%;
      max-width: 95%;
      height: 525px;
    }

    #legend {
      font-family: Arial, sans-serif;
      background: #fff;
      padding: 5px;
      margin: 10px;
      border: 2px solid #000;
    }

    #legend h3 {
      margin-top: 0;
    }

    #legend img {
      vertical-align: middle;
    }

    .gm-style-iw {
      max-height: 350px !important;
      overflow: auto !important;
    }
  </style>

  <div class="map-container mt-4">
    {{#if currentUser}}
    {{#unless geolocationError}}
    {{> googleMap name="map" options=mapOptions}}
    <div id="legend">
      <h3>Legend</h3>
    </div>
    {{else}}
    Geolocation failed: {{geolocationError}}
    {{/unless}}
    {{else}}
    <img class="text-center" src="/loading.gif" alt="Loading">
    {{/if}}
  </div>
</template>